{"ast":null,"code":"import _regeneratorRuntime from \"/Users/yoji/Desktop/Software engineer/Job hunting 2022.11/tablecheck-demo/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/yoji/Desktop/Software engineer/Job hunting 2022.11/tablecheck-demo/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\nvar _jsxFileName = \"/Users/yoji/Desktop/Software engineer/Job hunting 2022.11/tablecheck-demo/src/Pages/ShopDetail/index.tsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect, useState } from 'react';\nimport { useLocation } from 'react-router-dom'; // TODOs:\n// - if the shopDetail is empty, display alert message(e.g itigo - restaurant)\n// - better way of implementing conditional render(too many)\n// - Price alignment when dinner has min(or max) end lunch has both min and max\n// - add loader\n// - implement booking and map\n\nexport function ShopDetail() {\n  _s();\n\n  var _useState = useState({\n    name: [],\n    url: '',\n    phone_natl: '',\n    alt_address: {\n      city: '',\n      street: '',\n      street2: '',\n      region: ''\n    },\n    is_smartpay: false,\n    content_title_translations: [{\n      translation: ''\n    }],\n    content_body_translations: [{\n      translation: ''\n    }],\n    cuisines: [],\n    budget_dinner_max: '',\n    budget_dinner_min: '',\n    budget_lunch_max: '',\n    budget_lunch_min: '',\n    search_image: ''\n  }),\n      shopDetail = _useState[0],\n      setShopDetail = _useState[1];\n\n  var location = useLocation();\n  var shop = location.state;\n\n  var getShopDetails = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var res, data;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return fetch(\"https://staging-snap.tablecheck.com/v2/shops/\".concat(shop, \"?sort=slug&sort_by=slug&sort_order=asc\"));\n\n            case 3:\n              res = _context.sent;\n              _context.next = 6;\n              return res.json();\n\n            case 6:\n              data = _context.sent;\n              console.log('data', data.shops[0]);\n              setShopDetail(data.shops[0]);\n              _context.next = 14;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](0);\n              console.error(_context.t0);\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 11]]);\n    }));\n\n    return function getShopDetails() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    getShopDetails();\n  }, []); // if (data.shops.length === 0) {\n\n  if (shopDetail === undefined) {\n    return __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 12\n      }\n    }, \"No detail found\");\n  }\n\n  return __jsx(React.Fragment, null) // Priority to display 1. English 2. Japanese 3. Not display\n  // <>\n  //   {shopDetail.name.length === 1 ? (\n  //     <Helmet>\n  //       <title>{shopDetail.name[0]}</title>\n  //     </Helmet>\n  //   ) : shopDetail.name.length > 1 ? (\n  //     <Helmet>\n  //       <title>{shopDetail.name[1]}</title>\n  //     </Helmet>\n  //   ) : (\n  //     <></>\n  //   )}\n  //   <div\n  //     style={{\n  //       display: 'flex',\n  //       width: 'min(80vw, 1400px)',\n  //       margin: 'auto',\n  //       gap: '5%',\n  //     }}\n  //   >\n  //     <div style={{ width: '60%' }}>\n  //       <div>\n  //         {shopDetail.name.length === 1 ? (\n  //           <h3>{shopDetail.name[0]}</h3>\n  //         ) : shopDetail.name.length > 1 ? (\n  //           <h3>{shopDetail.name[1]}</h3>\n  //         ) : (\n  //           <></>\n  //         )}\n  //         <p>\n  //           <span>{shopDetail.alt_address?.street2}</span>\n  //           <span>{shopDetail.alt_address.street}</span>, &nbsp;\n  //           <span>{shopDetail.alt_address.city}</span>, &nbsp;\n  //           <span>{shopDetail.alt_address.region}</span>\n  //         </p>\n  //         <p>\n  //           <span>\n  //             <a href={shopDetail.url} target=\"_blank\">\n  //               Website\n  //             </a>\n  //           </span>\n  //           <span>\n  //             <a href=\"tel:{shopDetail.phone_natl}\" target=\"_blank\">\n  //               {shopDetail.phone_natl}\n  //             </a>\n  //           </span>\n  //         </p>\n  //       </div>\n  //       <br />\n  //       <div>\n  //         {shopDetail.is_smartpay && <p>Accepts Contactless Pay</p>}\n  //         {shopDetail.content_title_translations !== undefined &&\n  //           shopDetail.content_body_translations !== undefined &&\n  //           shopDetail.content_title_translations.length === 1 && (\n  //             <>\n  //               <h3>\n  //                 {shopDetail.content_title_translations[0].translation}\n  //               </h3>\n  //               <p>{shopDetail.content_body_translations[0].translation}</p>\n  //             </>\n  //           )}\n  //         {shopDetail.content_title_translations !== undefined &&\n  //           shopDetail.content_body_translations !== undefined &&\n  //           shopDetail.content_title_translations.length > 1 && (\n  //             <>\n  //               <h3>\n  //                 {shopDetail.content_title_translations[1].translation}\n  //               </h3>\n  //               <p>{shopDetail.content_body_translations[1].translation}</p>\n  //             </>\n  //           )}\n  //         <div style={{ display: 'flex' }}>\n  //           <div style={{ width: '50%' }}>\n  //             <h4>Cuisines</h4>\n  //             {shopDetail.cuisines.map((cuisine, idx) => (\n  //               <span key={idx}>{cuisine}, </span>\n  //             ))}\n  //           </div>\n  //           <div style={{ width: '50%' }}>\n  //             <h4>Price</h4>\n  //             <div>\n  //               {shopDetail.budget_lunch_min &&\n  //               shopDetail.budget_lunch_max ? (\n  //                 <span>\n  //                   ¥\n  //                   {shopDetail.budget_lunch_min\n  //                     .slice(0, -2)\n  //                     .replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}{' '}\n  //                   - ¥\n  //                   {shopDetail.budget_lunch_max\n  //                     .slice(0, -2)\n  //                     .replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}\n  //                 </span>\n  //               ) : shopDetail.budget_lunch_min &&\n  //                 !shopDetail.budget_lunch_max ? (\n  //                 <span>\n  //                   ¥\n  //                   {shopDetail.budget_lunch_min\n  //                     .slice(0, -2)\n  //                     .replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}{' '}\n  //                   -\n  //                 </span>\n  //               ) : shopDetail.budget_lunch_max &&\n  //                 !shopDetail.budget_lunch_min ? (\n  //                 <span>\n  //                   {' '}\n  //                   - ¥\n  //                   {shopDetail.budget_lunch_max\n  //                     .slice(0, -2)\n  //                     .replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}\n  //                 </span>\n  //               ) : (\n  //                 <></>\n  //               )}\n  //             </div>\n  //             <div>\n  //               {shopDetail.budget_dinner_min &&\n  //               shopDetail.budget_dinner_max ? (\n  //                 <span>\n  //                   ¥\n  //                   {shopDetail.budget_dinner_min\n  //                     .slice(0, -2)\n  //                     .replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}{' '}\n  //                   - ¥\n  //                   {shopDetail.budget_dinner_max\n  //                     .slice(0, -2)\n  //                     .replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}\n  //                 </span>\n  //               ) : shopDetail.budget_dinner_min &&\n  //                 !shopDetail.budget_dinner_max ? (\n  //                 <span>\n  //                   ¥\n  //                   {shopDetail.budget_dinner_min\n  //                     .slice(0, -2)\n  //                     .replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}{' '}\n  //                   -\n  //                 </span>\n  //               ) : shopDetail.budget_dinner_max &&\n  //                 !shopDetail.budget_dinner_min ? (\n  //                 <span>\n  //                   - ¥\n  //                   {shopDetail.budget_dinner_max\n  //                     .slice(0, -2)\n  //                     .replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}\n  //                 </span>\n  //               ) : (\n  //                 <></>\n  //               )}\n  //             </div>\n  //           </div>\n  //         </div>\n  //       </div>\n  //     </div>\n  //     <div style={{ width: '40%' }}>\n  //       <img\n  //         src={shopDetail.search_image}\n  //         alt=\"restaurant\"\n  //         style={{ width: '100%', minWidth: '300px' }}\n  //       />\n  //     </div>\n  //   </div>\n  // </>\n  ;\n}\n\n_s(ShopDetail, \"Z0RBBl21PPW8oahxfGrTbzHsz1E=\", false, function () {\n  return [useLocation];\n});\n\n_c = ShopDetail;\n\nvar _c;\n\n$RefreshReg$(_c, \"ShopDetail\");","map":{"version":3,"names":["useEffect","useState","useLocation","ShopDetail","name","url","phone_natl","alt_address","city","street","street2","region","is_smartpay","content_title_translations","translation","content_body_translations","cuisines","budget_dinner_max","budget_dinner_min","budget_lunch_max","budget_lunch_min","search_image","shopDetail","setShopDetail","location","shop","state","getShopDetails","fetch","res","json","data","console","log","shops","error","undefined"],"sources":["/Users/yoji/Desktop/Software engineer/Job hunting 2022.11/tablecheck-demo/src/Pages/ShopDetail/index.tsx"],"sourcesContent":["import { Helmet } from 'react-helmet'\nimport { useTranslation } from 'react-i18next'\nimport { PageWrapper, PageContent, Headline, PageImage } from 'Layouts'\nimport { HomeHeadline, HomeWrapper } from './styles'\nimport { useEffect, useState } from 'react'\nimport { Link, useLocation } from 'react-router-dom'\n\n// TODOs:\n// - if the shopDetail is empty, display alert message(e.g itigo - restaurant)\n// - better way of implementing conditional render(too many)\n// - Price alignment when dinner has min(or max) end lunch has both min and max\n// - add loader\n// - implement booking and map\n\ntype ShopDetail = {\n  name: string[]\n  url: string\n  phone_natl: string\n  alt_address: {\n    city: string\n    street: string\n    street2?: string\n    region: string\n  }\n  is_smartpay: boolean\n  content_title_translations?: { translation?: string }[]\n  content_body_translations?: { translation?: string }[]\n  cuisines: string[]\n  budget_dinner_max?: string\n  budget_dinner_min?: string\n  budget_lunch_max?: string\n  budget_lunch_min?: string\n  search_image: string\n}\n\nexport function ShopDetail(): JSX.Element {\n  const [shopDetail, setShopDetail] = useState<ShopDetail>({\n    name: [],\n    url: '',\n    phone_natl: '',\n    alt_address: { city: '', street: '', street2: '', region: '' },\n    is_smartpay: false,\n    content_title_translations: [{ translation: '' }],\n    content_body_translations: [{ translation: '' }],\n    cuisines: [],\n    budget_dinner_max: '',\n    budget_dinner_min: '',\n    budget_lunch_max: '',\n    budget_lunch_min: '',\n    search_image: '',\n  })\n\n  const location = useLocation()\n  const shop: any = location.state\n\n  const getShopDetails = async () => {\n    try {\n      const res = await fetch(\n        `https://staging-snap.tablecheck.com/v2/shops/${shop}?sort=slug&sort_by=slug&sort_order=asc`,\n      )\n      const data = await res.json()\n      console.log('data', data.shops[0])\n\n      setShopDetail(data.shops[0])\n    } catch (e) {\n      console.error(e)\n    }\n  }\n\n  useEffect(() => {\n    getShopDetails()\n  }, [])\n\n  // if (data.shops.length === 0) {\n  if (shopDetail === undefined) {\n    return <div>No detail found</div>\n  }\n\n  return (\n    <></>\n    // Priority to display 1. English 2. Japanese 3. Not display\n    // <>\n    //   {shopDetail.name.length === 1 ? (\n    //     <Helmet>\n    //       <title>{shopDetail.name[0]}</title>\n    //     </Helmet>\n    //   ) : shopDetail.name.length > 1 ? (\n    //     <Helmet>\n    //       <title>{shopDetail.name[1]}</title>\n    //     </Helmet>\n    //   ) : (\n    //     <></>\n    //   )}\n    //   <div\n    //     style={{\n    //       display: 'flex',\n    //       width: 'min(80vw, 1400px)',\n    //       margin: 'auto',\n    //       gap: '5%',\n    //     }}\n    //   >\n    //     <div style={{ width: '60%' }}>\n    //       <div>\n    //         {shopDetail.name.length === 1 ? (\n    //           <h3>{shopDetail.name[0]}</h3>\n    //         ) : shopDetail.name.length > 1 ? (\n    //           <h3>{shopDetail.name[1]}</h3>\n    //         ) : (\n    //           <></>\n    //         )}\n\n    //         <p>\n    //           <span>{shopDetail.alt_address?.street2}</span>\n    //           <span>{shopDetail.alt_address.street}</span>, &nbsp;\n    //           <span>{shopDetail.alt_address.city}</span>, &nbsp;\n    //           <span>{shopDetail.alt_address.region}</span>\n    //         </p>\n    //         <p>\n    //           <span>\n    //             <a href={shopDetail.url} target=\"_blank\">\n    //               Website\n    //             </a>\n    //           </span>\n    //           <span>\n    //             <a href=\"tel:{shopDetail.phone_natl}\" target=\"_blank\">\n    //               {shopDetail.phone_natl}\n    //             </a>\n    //           </span>\n    //         </p>\n    //       </div>\n    //       <br />\n    //       <div>\n    //         {shopDetail.is_smartpay && <p>Accepts Contactless Pay</p>}\n    //         {shopDetail.content_title_translations !== undefined &&\n    //           shopDetail.content_body_translations !== undefined &&\n    //           shopDetail.content_title_translations.length === 1 && (\n    //             <>\n    //               <h3>\n    //                 {shopDetail.content_title_translations[0].translation}\n    //               </h3>\n    //               <p>{shopDetail.content_body_translations[0].translation}</p>\n    //             </>\n    //           )}\n    //         {shopDetail.content_title_translations !== undefined &&\n    //           shopDetail.content_body_translations !== undefined &&\n    //           shopDetail.content_title_translations.length > 1 && (\n    //             <>\n    //               <h3>\n    //                 {shopDetail.content_title_translations[1].translation}\n    //               </h3>\n    //               <p>{shopDetail.content_body_translations[1].translation}</p>\n    //             </>\n    //           )}\n    //         <div style={{ display: 'flex' }}>\n    //           <div style={{ width: '50%' }}>\n    //             <h4>Cuisines</h4>\n    //             {shopDetail.cuisines.map((cuisine, idx) => (\n    //               <span key={idx}>{cuisine}, </span>\n    //             ))}\n    //           </div>\n    //           <div style={{ width: '50%' }}>\n    //             <h4>Price</h4>\n    //             <div>\n    //               {shopDetail.budget_lunch_min &&\n    //               shopDetail.budget_lunch_max ? (\n    //                 <span>\n    //                   ¥\n    //                   {shopDetail.budget_lunch_min\n    //                     .slice(0, -2)\n    //                     .replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}{' '}\n    //                   - ¥\n    //                   {shopDetail.budget_lunch_max\n    //                     .slice(0, -2)\n    //                     .replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}\n    //                 </span>\n    //               ) : shopDetail.budget_lunch_min &&\n    //                 !shopDetail.budget_lunch_max ? (\n    //                 <span>\n    //                   ¥\n    //                   {shopDetail.budget_lunch_min\n    //                     .slice(0, -2)\n    //                     .replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}{' '}\n    //                   -\n    //                 </span>\n    //               ) : shopDetail.budget_lunch_max &&\n    //                 !shopDetail.budget_lunch_min ? (\n    //                 <span>\n    //                   {' '}\n    //                   - ¥\n    //                   {shopDetail.budget_lunch_max\n    //                     .slice(0, -2)\n    //                     .replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}\n    //                 </span>\n    //               ) : (\n    //                 <></>\n    //               )}\n    //             </div>\n    //             <div>\n    //               {shopDetail.budget_dinner_min &&\n    //               shopDetail.budget_dinner_max ? (\n    //                 <span>\n    //                   ¥\n    //                   {shopDetail.budget_dinner_min\n    //                     .slice(0, -2)\n    //                     .replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}{' '}\n    //                   - ¥\n    //                   {shopDetail.budget_dinner_max\n    //                     .slice(0, -2)\n    //                     .replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}\n    //                 </span>\n    //               ) : shopDetail.budget_dinner_min &&\n    //                 !shopDetail.budget_dinner_max ? (\n    //                 <span>\n    //                   ¥\n    //                   {shopDetail.budget_dinner_min\n    //                     .slice(0, -2)\n    //                     .replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}{' '}\n    //                   -\n    //                 </span>\n    //               ) : shopDetail.budget_dinner_max &&\n    //                 !shopDetail.budget_dinner_min ? (\n    //                 <span>\n    //                   - ¥\n    //                   {shopDetail.budget_dinner_max\n    //                     .slice(0, -2)\n    //                     .replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')}\n    //                 </span>\n    //               ) : (\n    //                 <></>\n    //               )}\n    //             </div>\n    //           </div>\n    //         </div>\n    //       </div>\n    //     </div>\n    //     <div style={{ width: '40%' }}>\n    //       <img\n    //         src={shopDetail.search_image}\n    //         alt=\"restaurant\"\n    //         style={{ width: '100%', minWidth: '300px' }}\n    //       />\n    //     </div>\n    //   </div>\n    // </>\n  )\n}\n"],"mappings":";;;;;;;;AAIA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAAeC,WAAf,QAAkC,kBAAlC,C,CAEA;AACA;AACA;AACA;AACA;AACA;;AAuBA,OAAO,SAASC,UAAT,GAAmC;EAAA;;EACxC,gBAAoCF,QAAQ,CAAa;IACvDG,IAAI,EAAE,EADiD;IAEvDC,GAAG,EAAE,EAFkD;IAGvDC,UAAU,EAAE,EAH2C;IAIvDC,WAAW,EAAE;MAAEC,IAAI,EAAE,EAAR;MAAYC,MAAM,EAAE,EAApB;MAAwBC,OAAO,EAAE,EAAjC;MAAqCC,MAAM,EAAE;IAA7C,CAJ0C;IAKvDC,WAAW,EAAE,KAL0C;IAMvDC,0BAA0B,EAAE,CAAC;MAAEC,WAAW,EAAE;IAAf,CAAD,CAN2B;IAOvDC,yBAAyB,EAAE,CAAC;MAAED,WAAW,EAAE;IAAf,CAAD,CAP4B;IAQvDE,QAAQ,EAAE,EAR6C;IASvDC,iBAAiB,EAAE,EAToC;IAUvDC,iBAAiB,EAAE,EAVoC;IAWvDC,gBAAgB,EAAE,EAXqC;IAYvDC,gBAAgB,EAAE,EAZqC;IAavDC,YAAY,EAAE;EAbyC,CAAb,CAA5C;EAAA,IAAOC,UAAP;EAAA,IAAmBC,aAAnB;;EAgBA,IAAMC,QAAQ,GAAGtB,WAAW,EAA5B;EACA,IAAMuB,IAAS,GAAGD,QAAQ,CAACE,KAA3B;;EAEA,IAAMC,cAAc;IAAA,sEAAG;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA;cAAA,OAEDC,KAAK,wDAC2BH,IAD3B,4CAFJ;;YAAA;cAEbI,GAFa;cAAA;cAAA,OAKAA,GAAG,CAACC,IAAJ,EALA;;YAAA;cAKbC,IALa;cAMnBC,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBF,IAAI,CAACG,KAAL,CAAW,CAAX,CAApB;cAEAX,aAAa,CAACQ,IAAI,CAACG,KAAL,CAAW,CAAX,CAAD,CAAb;cARmB;cAAA;;YAAA;cAAA;cAAA;cAUnBF,OAAO,CAACG,KAAR;;YAVmB;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAAH;;IAAA,gBAAdR,cAAc;MAAA;IAAA;EAAA,GAApB;;EAcA3B,SAAS,CAAC,YAAM;IACd2B,cAAc;EACf,CAFQ,EAEN,EAFM,CAAT,CAlCwC,CAsCxC;;EACA,IAAIL,UAAU,KAAKc,SAAnB,EAA8B;IAC5B,OAAO;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,qBAAP;EACD;;EAED,OACE,2BADF,CAEE;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EArKF;AAuKD;;GAlNejC,U;UAiBGD,W;;;KAjBHC,U"},"metadata":{},"sourceType":"module"}